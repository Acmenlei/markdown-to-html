(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();const re=/(#+)\s(.*)/g,L=/^\s*(\d)\./,S=/\[(.*)\]\((.*)\)/,K=/!\[(.*)\]\((.*)\)/,m=/\/\*(.*)\*\//g,T=/(function)([\s\(&lt])/g;function Z(e){/^\s+/.test(e[0])&&(e[0]=e[0].replace(/^(\s+)/g,n=>`
`)),e[0].startsWith(`
`)||(e[0]=`
`+e[0])}function C(e,n){let t="";for(let r of e){let s=r.children.length?C(r.children,n):"";t+=`<li>${r.value}${s}</li>`}return`<${n?"ol":"ul"}>${t}</${n?"ol":"ul"}>`}function ne(e){return L.test(e)}function se(e){return e.indexOf("-")!=-1}function le(e){return e.indexOf("#")!=-1}function ae(e){return K.test(e)}function ie(e){return S.test(e)}function ce(e){return e.startsWith("```")}function oe(e){return e.startsWith("> ")}function g(e,n,t){return e<n-1?t:""}function I(e){return e.startsWith("//")||e.startsWith("/*")||e.startsWith("*")||e.startsWith("#")}function ue(e){return e.trim()[0]==="|"}function E(e){return m.test(e)}function _(e){return T.test(e)}function $(e){let n="",t=-1;for(;(t=e.indexOf('"'))!=-1||(t=e.indexOf("'"))!=-1;){let r=!1;e.indexOf('"')!=-1&&(r=!0),n+=e.slice(0,t),e=e.slice(t+1);let s=r?e.indexOf('"'):e.indexOf("'");n+=`<q class=declare-string>${e.slice(0,s)}</q>`,e=e.slice(s+1)}return e&&(n+=e),n}function N(e){return e.replace(/([^\w])(false|true)(?!\w)/g,(n,t,r)=>`${t}<span class=declare-boolean>${r}</span>`)}function j(e){return e.replace(/([^\w])(\d+)(?![\w\.])/g,(n,t,r)=>`${t}<span class=declare-number>${r}</span>`)}function H(e){return e.replace(/(\s*null)(?!\w)/g,(n,t)=>`<span class=declare-operator-char>${t}</span>`)}function M(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function w(e,n){return n?`<span class=line-number>${e}</span>`:""}function pe(e){return`<blockquote>${e.slice(2)}</blockquote>`}function v(e,n,t){let r="",s=e.split(`
`);for(let l=0;l<s.length;l++){let a=s[l];r+=fe(M(a),n++,t)}return r}function fe(e,n,t){let r=[],s="",l=0,a="";e=$(e);let i=e.length;for(let c=0;c<i;c++)if(e[c]==")"){let y="";for(;r.length&&(y=r.pop())!="(";)s=y+s;y!="("?r.push(u(s+")",!1)):(l--,r.push(u(s,!0))),s=""}else e[c]=="("&&l++,r.push(e[c]);let o=0;for(;l--;)o=r.lastIndexOf("("),a="("+u(r.slice(o+1).join(""),!1)+a,r=r.slice(0,o);return r.length&&(a=u(r.join(""),!1)+a),`<p>${w(n,t.lineNumber)}<span>${a}</span></p>`}function u(e,n){if(!e.trim())return n?`(${e})`:e;if(I(e.trim()))return ge(e);let t=e;return t=Q(t),t=$(t),t=V(t),t=me(t),t=de(t),t=he(t),t=z(t),t=N(t),t=j(t),t=H(t),n?`(${t})`:t}function V(e){if(/^(const|int|string|var|let)/.test(e.trim())){if(/(\w+\s+)(.*\s*)=(.*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)=(.*)/,(r,s,l,a)=>`${F(s)}${b(l)}=${V(a)}`);if(/(\w+\s+)(.*\s*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)/,(r,s,l,a)=>`${F(s)}${b(l)}`)}let n="",t=e.split(",");for(let r=0,s=t.length;r<s;r++)n+=`${b(t[r])}${g(r,s,",")}`;return n}function b(e){return/(\s*\w+\s*)?:(\s*\w+\s*)/.test(e)?e.replace(/(\s*\w+\s*)?:(\s*\w+\s*)/,(n,t,r)=>t?`<span class=declare-param>${t}</span>:<span class=declare-param-type>${r}</span>`:`:<span class=declare-param-type>${r}</span>`):_(e)?z(e):e}function z(e){return e.replace(T,(n,t,r)=>`<span class=declare-function>${t}</span>${r}`)}function de(e){return e.includes("=>")?e.replace(/=>/g,n=>`<span class=declare-arrow-func>${n}</span>`):e}function he(e){return e.replace(/(\w+)(\s*)\(/g,(n,t,r)=>`<span class=declare-func-execute>${t}</span>${r}(`)}function F(e){return e.replace(/(const|let|var)(\s+)/gi,(n,t,r)=>`<span class=declare-keyword>${t}</span><span class=declare-constant-name>${r}</span>`)}function me(e){return E(e)?Q(e):e.replace(/(class|await|in|of|typeof|module|async|this|as|super|module|export\s+default|export|import|from|while|extends|new|abstract|void|static|return|break|continue|switch|case|finally|try|catch|else|if|throw)(?=[\s+\(\.])/g,(n,t)=>`<span class=declare-operator-char>${t}</span>`)}function ge(e){return`<span class=declare-comments>${e}</span>`}function Q(e){return e.replace(m,n=>`<span class=declare-comments>${n}</span>`)}function $e(e,n,t){if(/(<!--.*-->)/g.test(e))return`${p(n,t)}<span class=declare-comments>${M(RegExp.$1)}</span></p>`;if(/(\s*)<(\!?\w+)(.*)>(.*)<\/\w+>/g.test(e)){let r=RegExp.$3.trim().split(" "),s=R(r);return`${p(n,t)}${RegExp.$1}&lt<span class=declare-html-tag>${RegExp.$2}</span>${s&&"&nbsp;"+s}&gt${RegExp.$4}&lt/<span class=declare-html-tag>${RegExp.$2}</span>&gt</p>`}else if(/(\s*)<(\!?\w+)(.*)>/g.test(e)){let r=RegExp.$3.trim().split(" "),s=R(r);return`${p(n,t)}${RegExp.$1}&lt<span class=declare-html-tag>${RegExp.$2}</span>${s&&"&nbsp;"+s}&gt</p>`}else return/(\s*)<\/(\w+)>/g.test(e)?`${p(n,t)}${RegExp.$1}&lt/<span class=declare-html-tag>${RegExp.$2}</span>&gt</p>`:v(e,n++,t)}function p(e,n){return`<p class=line-code>${w(e,n.lineNumber)}`}function R(e){let n="";for(let t=0,r=e.length;t<r;t++){let s=e[t];if(!s.trim()){n+=s;continue}let l=s.indexOf("=");if(l!=-1){let a=s.slice(0,l),i=s.slice(l+1);n+=`<span class=declare-attr-key>${a}</span>=<span class=declare-attr-value>${i}</span>${g(t,r,"&nbsp;")}`}else{n+=s;continue}}return n}function k(){return""}function we(e,n,t){let r="",s=e.split(`
`);for(let l=0;l<s.length;l++){let a=s[l];r+=ye(a,n++,t)}return r}function ye(e,n,t){let r=[],s="",l=0,a="";for(let o=0;o<e.length;o++)if(e[o]==")"){let c="";for(;r.length&&(c=r.pop())!="(";)s=c+s;c!="("?r.push(f(s+")",!1)):(l--,r.push(f(s,!0))),s=""}else e[o]=="("&&l++,r.push(e[o]);let i=0;for(;l--;)i=r.lastIndexOf("("),a="("+f(r.slice(i+1).join(""),!1)+a,r=r.slice(0,i);return r.length&&(a=f(r.join(""),!1)+a),`<p>${w(n,t.lineNumber)}<span>${a}</span></p>`}function f(e,n){if(!e.trim())return n?`(${e})`:e;if(I(e.trim()))return Oe(e);let t=e;return t=X(t),t=U(t),t=ke(t),t=$(t),t=be(t),t=N(t),t=j(t),t=H(t),n?`(${t})`:t}function U(e){if(/^(char|int|String|Byte\[?\]?|[A-Z]+)/.test(e.trim())){if(/(\w+\s+)(.*\s*)=(.*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)=(.*)/,(r,s,l,a)=>`${q(s)}${O(l)}=${U(a)}`);if(/(\w+\s+)(.*\s*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)/,(r,s,l,a)=>`${q(s)}${O(l)}`)}let n="",t=e.split(",");for(let r=0,s=t.length;r<s;r++)n+=`${O(t[r])}${g(r,s,",")}`;return n}const P=/(\s*\w+\s*)?:(\s*\w+\s*)/g,W=/(:\s*\w+\s*)?&lt;(\s*\/?\s*\w+\s*)&gt;/g;function O(e){return W.test(e)?e.replace(W,(n,t,r)=>`${t?`<span class=declare-param-type>${t}</span>`:""}&lt;<span class=declare-param-type>${r}</span>&gt;`):P.test(e)?e.replace(P,(n,t,r)=>t?`<span class=declare-param>${t}</span>:<span class=declare-param-type>${r}</span>`:`:<span class=declare-param-type>${r}</span>`):e}function be(e){return e.replace(/(\w+)(\s*)\(/g,(n,t,r)=>`<span class=declare-func-execute>${t}</span>${r}(`)}function q(e){return e.replace(/(const|let|var|int|string|Byte\[?\]?|[A-Z]+)(\s+)/gi,(n,t,r)=>`<span class=declare-keyword>${t}</span><span class=declare-constant-name>${r}</span>`)}function ke(e){return E(e)?X(e):e.replace(/(class|in|of|this|super|interface|module|import|from|extends|new|abstract|void|static|return|break|continue|switch|case|finally|try|catch|else|if|throw)(?=[\s\(\.])/g,(n,t)=>`<span class=declare-operator-char>${t}</span>`)}function Oe(e){return`<span class=declare-comments>${e}</span>`}function X(e){return e.replace(m,n=>`<span class=declare-comments>${n}</span>`)}function A(e,n,t){let r="",s=e.split(`
`);for(let l=0;l<s.length;l++){let a=s[l];r+=xe(M(a),n++,t)}return r}function xe(e,n,t){let r=[],s="",l=0,a="";for(let o=0;o<e.length;o++)if(e[o]==")"){let c="";for(;r.length&&(c=r.pop())!="(";)s=c+s;c!="("?r.push(d(s+")",!1)):(l--,r.push(d(s,!0))),s=""}else e[o]=="("&&l++,r.push(e[o]);let i=0;for(;l--;)i=r.lastIndexOf("("),a="("+d(r.slice(i+1).join(""),!1)+a,r=r.slice(0,i);return r.length&&(a=d(r.join(""),!1)+a),`<p>${w(n,t.lineNumber)}<span>${a}</span></p>`}function d(e,n){if(!e.trim())return n?`(${e})`:e;if(I(e.trim()))return Te(e);let t=e;return t=te(t),t=Y(t),t=Le(t),t=$(t),t=Se(t),t=ve(t),t=ee(t),t=N(t),t=j(t),t=H(t),n?`(${t})`:t}function Y(e){if(/^(const|int|string|var|let)/.test(e.trim())){if(/(\w+\s+)(.*\s*)=(.*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)=(.*)/,(r,s,l,a)=>`${G(s)}${x(l)}=${Y(a)}`);if(/(\w+\s+)(.*\s*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)/,(r,s,l,a)=>`${G(s)}${x(l)}`)}let n="",t=e.split(",");for(let r=0,s=t.length;r<s;r++)n+=`${x(t[r])}${g(r,s,",")}`;return n}const B=/(\s*\w+\s*)?:(\s*\w+\s*)/g,D=/(:\s*\w+\s*)?&lt;(\s*\/?\s*\w+\s*)&gt;/g;function x(e){return D.test(e)?e.replace(D,(n,t,r)=>`${t?`<span class=declare-param-type>${t}</span>`:""}&lt;<span class=declare-param-type>${r}</span>&gt;`):B.test(e)?e.replace(B,(n,t,r)=>t?`<span class=declare-param>${t}</span>:<span class=declare-param-type>${r}</span>`:`:<span class=declare-param-type>${r}</span>`):_(e)?ee(e):e}function ee(e){return e.replace(T,(n,t,r)=>`<span class=declare-function>${t}</span>${r}`)}function Se(e){return e.includes("=>")?e.replace(/=>/g,n=>`<span class=declare-arrow-func>${n}</span>`):e}function ve(e){return e.replace(/(\w+)(\s*)\(/g,(n,t,r)=>`<span class=declare-func-execute>${t}</span>${r}(`)}function G(e){return e.replace(/(const|let|var|int|string)(\s+)/gi,(n,t,r)=>`<span class=declare-keyword>${t}</span><span class=declare-constant-name>${r}</span>`)}function Le(e){return E(e)?te(e):e.replace(/(class|in|of|this|super|interface|typeof|module|declare|type|keyof|infer|export\s+default|export|import|from|extends|new|abstract|void|static|return|break|continue|switch|case|finally|try|catch|else|if|throw)(?=[\s\(\.])/g,(n,t)=>`<span class=declare-operator-char>${t}</span>`)}function Te(e){return`<span class=declare-comments>${e}</span>`}function te(e){return e.replace(m,n=>`<span class=declare-comments>${n}</span>`)}const Ce={java:we,c:k,["c++"]:k,["c#"]:k,js:v,javascript:v,ts:A,typescript:A,html:$e};function Ie(e,n,t,r){let s="",l=e[n].slice(3).trim().toLowerCase(),a=1;for(++n;n<t&&!e[n].startsWith("```");)s+=r.highlight?Ce[l](e[n],a++,r):e[n]+`
`,n++;return e[n]="",{startIdx:n,result:r.highlight?`<pre><span class=language>${l}</span><code>${s}</code></pre>`:`<pre><code>${s}</code></pre>`}}function Ee(e){let n="",t=-1;for(;(t=e.indexOf("`"))!=-1;){n+=e.slice(0,t),e=e.slice(t+1);let r=e.indexOf("`");n+=`<code class=single-code>${e.slice(0,r)}</code>`,e=e.slice(r+1)}return e&&(n+=e),n}function Ne(e,n,t){let r="";for(;n<t&&e[n].indexOf("-")!=-1;n++)r+=e[n]+`
`;return r=je(r),{startIdx:n,result:r}}function je(e){const n=e.match(/(\s?)+-\s(.*)/g);if(!n)return e;Z(n);const t=He(n);return C(t,!1)}function He(e){const n=[],t=[],r=e.length;for(let s=0;s<r;s++){const l=e[s].indexOf("-"),a={children:[],value:e[s].slice(l+1),level:l,parent:null};if(!t.length){n.push(a),t.push(a);continue}const i=t[t.length-1].level,o=e[s].indexOf("-");let c;if(i===o)c=t[t.length-1].parent;else if(i>o){for(;t[t.length-1].level>o;)t.pop();c=t[t.length-1].parent}else c=t[t.length-1];a.parent=c,c?c.children.push(a):n.push(a),t.push(a)}return n}function Me(e){let n="";for(;K.test(e);){let t=e.indexOf("![");n+=e.slice(0,t),e=e.slice(t+1);let s=e.indexOf("]("),l=e.slice(0,s);e=e.slice(s+2);let a=e.indexOf(")"),i=e.slice(0,a);e=e.slice(a+1),n+=`<p><img alt=${l} src=${i} /></p>`}return n}function Fe(e){console.log(e,S.test(e));let n="";for(;S.test(e);){let t=e.indexOf("[");n+=e.slice(0,t),e=e.slice(t+1);let s=e.indexOf("]("),l=e.slice(0,s);e=e.slice(s+2);let a=e.indexOf(")"),i=e.slice(0,a);e=e.slice(a+1),n+=`<a href=${i}>${l}</a>`}return n}function Re(e,n,t){let r="";for(;n<t&&L.test(e[n]);n++)r+=e[n]+`
`;return r=Pe(r),{startIdx:n,result:r}}function Pe(e){const n=e.match(/\s*\d\.(.*)/g);if(!n)return e;Z(n);const t=We(n);return C(t,!0)}function We(e){const n=[],t=[],r=e.length;for(let s=0;s<r;s++){let l=0;L.test(e[s])&&(l=e[s].indexOf(String(RegExp.$1+".")));const a={children:[],value:e[s].slice(l+2),level:l,parent:null};if(!t.length){n.push(a),t.push(a);continue}const i=t[t.length-1].level,o=l;let c;if(i===o)c=t[t.length-1].parent;else if(i>o){for(;t[t.length-1].level>o;)t.pop();c=t[t.length-1].parent}else c=t[t.length-1];a.parent=c,c?c.children.push(a):n.push(a),t.push(a)}return n}function qe(e){let n=Ae(e);return n=Be(n),`<p>${n}</p>`}function Ae(e){let n="",t=-1;for(;(t=e.indexOf("**"))!=-1;){n+=e.slice(0,t),e=e.slice(t+2);let r=e.indexOf("**");n+=`<strong>${e.slice(0,r)}</strong>`,e=e.slice(r+2)}return e&&(n+=e),n}function Be(e){let n="",t=-1;for(;(t=e.indexOf("*"))!=-1;){n+=e.slice(0,t),e=e.slice(t+1);let r=e.indexOf("*");n+=`<i>${e.slice(0,r)}</i>`,e=e.slice(r+1)}return e&&(n+=e),n}function J(e){return e.length>6?6:e.length}function De(e,n,t){let r="<table>";for(r+=Ge(e[n]),r+="<tbody >",++n;n<t&&e[n].trim()[0]==="|";n++)r+=Je(e[n]);return r+="</tbody></table>",{startIdx:n-1,result:r}}function Ge(e){let n=-1,t="<thead><tr>";for(let r=0,s=e.length;r<s;r++)e[r]=="|"&&h(e,r-1)&&h(e,r+1)&&(n!=-1&&(t+=`<th>${e.slice(n+1,r)}</th>`),n=r);return t+"</tr></thead>"}function Je(e){let n=-1,t="<tr>";for(let r=0,s=e.length;r<s;r++)if(e[r]=="|"&&h(e,r-1)&&h(e,r+1)){if(n!=-1){let l=e.slice(n+1,r);if(l.trim()[0]==="-")continue;t+=`<td>${l}</td>`}n=r}return t+"</tr>"}function h(e,n){return e[n]===" "||e[n]==null}const Ke={lineNumber:!1,highlight:!1};function Ze(e,n){const t=e.split(`
`);let r="",s=(t==null?void 0:t.length)||0;for(let l=0;l<s;){if(le(t[l]))r+=t[l].trim().replace(re,(i,o,c)=>`<h${J(o)}>${c}</h${J(o)}>`);else if(ue(t[l])){const{result:a,startIdx:i}=De(t,l,s);l=i,r+=a}else if(ae(t[l]))r+=Me(t[l]);else if(ie(t[l]))r+=Fe(t[l]);else if(se(t[l])){const{result:a,startIdx:i}=Ne(t,l,s);l=i,r+=a}else if(ne(t[l])){const{result:a,startIdx:i}=Re(t,l,s);l=i,r+=a}else if(ce(t[l])){const{result:a,startIdx:i}=Ie(t,l,s,n||Ke);l=i,r+=a}else oe(t[l])?r+=pe(t[l]):(t[l]=t[l].trim())&&(r+=Ee(qe(t[l])));l++}return r}const _e=`
<div align="center">
	<h3>markdown-transform-html</h3>
	<p align="center">
		<a href="https://github.com/Acmenlei/markdown-to-html/tree/master" target="_blank"><img src="https://img.shields.io/badge/markdown--transform--html-%3E1.3-ff69b4" alt="markdown-transform-html"></a>
		<a href="https://www.tslang.cn/" target="_blank"> <img src="https://img.shields.io/badge/typescript-%3E4.0.0-blue" alt="typescript"></a>
	</p>
	<p>&nbsp;</p>
</div>

# introduce
Markdown converter, convert Markdwon content to HTML format, and provide code line number display and code highlighting effect (currently support javascript, HTML and other languages, later will support C, Java, C++, GO, etc.).
[The online demo](https://acmenlei.github.io/markdown-transform-html-demo/)

# prompt
To make the style apply only to the part that needs to be parsed, be sure to add a 'markdown-transform-html' class declaration to the parsed container.
# use
## install
\`\`\`js
pnpm install markdown-transform-html
\`\`\`
or
\`\`\`js
npm install markdown-transform-html
\`\`\`
or
\`\`\`js
yarn add markdown-transform-html
\`\`\`
## the basic use
\`\`\`ts
import { markdownToHTML } from "markdown-transform-html"
import  "markdown-transform-html/lib/styles/index.css";

const markdownContent = \`#### level 4\`;
const html = markdownToHTML(markdownContent);
(document.querySelector("#app") as Element).innerHTML = html;
\`\`\`
## code highlighting
If you want to highlight code, then you need to introduce the following css styles and configure options, which is optional.

\`\`\`ts
import "markdown-transform-html/lib/highlight/dark.css";
// import "markdown-transform-html/lib/highlight/light.css";

markdownToHTML(markdownContent, { highlight: true });
\`\`\`

# options
Configure the markdownToHTML options
| property name        | type    | default value | meaning |
| -------------------- | ------- | ------------- | ------- |
| lineNumber      | Boolean  | false | If you need line numbers, turn this option on |
| highlight      | Boolean  | false          | If you need to highlight code in markdown, turn this option on |

# end
For more details, please see the examples in the 'examples' folder. Any suggestions are welcome, and you are welcome to contribute code ~ to the warehouse
`;document.querySelector("#app").innerHTML=Ze(_e,{highlight:!0,lineNumber:!0});
