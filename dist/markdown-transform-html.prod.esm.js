const e=/(#+)\s(.*)/g,t=/^\s*(\d)\./,n=/\[(.*)\]\((.*)\)/,s=/!\[(.*)\]\((.*)\)/,r=/\/\*(.*)\*\//g,l=/(function)([\s\(&lt])/g;function a(e){/^\s+/.test(e[0])&&(e[0]=e[0].replace(/^(\s+)/g,(e=>"\n"))),e[0].startsWith("\n")||(e[0]="\n"+e[0])}function c(e,t){let n="";for(let s of e){let e=s.children.length?c(s.children,t):"";n+=`<li>${s.value}${e}</li>`}return`<${t?"ol":"ul"}>${n}</${t?"ol":"ul"}>`}function i(e){return t.test(e)}function p(e){return-1!=e.indexOf("-")}function u(e){return s.test(e)}function o(e){return n.test(e)}function f(e){return e.startsWith("```")}function $(e){return e.startsWith("> ")}function d(e,t,n){return e<t-1?n:""}function g(e){return e.startsWith("//")||e.startsWith("/*")||e.startsWith("*")||e.startsWith("#")}function h(e){return"|"===e.trim()[0]}function m(e){return r.test(e)}function x(e){return l.test(e)}function w(e){let t="",n=-1;for(;-1!=(n=e.indexOf('"'))||-1!=(n=e.indexOf("'"));){let s=!1;-1==e.indexOf('"')||(s=!0),t+=e.slice(0,n),e=e.slice(n+1);let r=s?e.indexOf('"'):e.indexOf("'");t+=`<q class=declare-string>${e.slice(0,r)}</q>`,e=e.slice(r+1)}return e&&(t+=e),t}function y(e){return e.replace(/([^\w])(false|true)(?!\w)/g,((e,t,n)=>`${t}<span class=declare-boolean>${n}</span>`))}function O(e){return e.replace(/([^\w])(\d+)(?![\w\.])/g,((e,t,n)=>`${t}<span class=declare-number>${n}</span>`))}function b(e){return e.replace(/(\s*null)(?!\w)/g,((e,t)=>`<span class=declare-operator-char>${t}</span>`))}function v(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function E(e,t){return t?`<span class=line-number>${e}</span>`:""}function R(e,t,n){let s="",r=e.split("\n");for(let e=0;e<r.length;e++){s+=I(v(r[e]),t++,n)}return s}function I(e,t,n){let s=[],r="",l=0,a="",c=(e=w(e)).length;for(let t=0;t<c;t++)if(")"==e[t]){let e="";for(;s.length&&"("!=(e=s.pop());)r=e+r;"("!=e?s.push(k(r+")",!1)):(l--,s.push(k(r,!0))),r=""}else"("==e[t]&&l++,s.push(e[t]);let i=0;for(;l--;)i=s.lastIndexOf("("),a="("+k(s.slice(i+1).join(""),!1)+a,s=s.slice(0,i);return s.length&&(a=k(s.join(""),!1)+a),`<p>${E(t,n.lineNumber)}<span>${a}</span></p>`}function k(e,t){if(!e.trim())return t?`(${e})`:e;if(g(e.trim()))return`<span class=declare-comments>${e}</span>`;let n=e;return n=A(n),n=w(n),n=j(n),n=function(e){if(m(e))return A(e);return e.replace(/(class|await|in|of|typeof|module|async|this|as|super|module|export\s+default|export|import|from|while|extends|new|abstract|void|static|return|break|continue|switch|case|finally|try|catch|else|if|throw)(?=[\s+\(\.])/g,((e,t)=>`<span class=declare-operator-char>${t}</span>`))}(n),n=function(e){if(!e.includes("=>"))return e;return e.replace(/=>/g,(e=>`<span class=declare-arrow-func>${e}</span>`))}(n),n=n.replace(/(\w+)(\s*)\(/g,((e,t,n)=>`<span class=declare-func-execute>${t}</span>${n}(`)),n=N(n),n=y(n),n=O(n),n=b(n),t?`(${n})`:n}function j(e){if(/^(const|int|string|var|let)/.test(e.trim())){if(/(\w+\s+)(.*\s*)=(.*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)=(.*)/,((e,t,n,s)=>`${q(t)}${W(n)}=${j(s)}`));if(/(\w+\s+)(.*\s*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)/,((e,t,n,s)=>`${q(t)}${W(n)}`))}let t="",n=e.split(",");for(let e=0,s=n.length;e<s;e++)t+=`${W(n[e])}${d(e,s,",")}`;return t}function W(e){return/(\s*\w+\s*)?:(\s*\w+\s*)/.test(e)?e.replace(/(\s*\w+\s*)?:(\s*\w+\s*)/,((e,t,n)=>t?`<span class=declare-param>${t}</span>:<span class=declare-param-type>${n}</span>`:`:<span class=declare-param-type>${n}</span>`)):x(e)?N(e):e}function N(e){return e.replace(l,((e,t,n)=>`<span class=declare-function>${t}</span>${n}`))}function q(e){return e.replace(/(const|let|var)(\s+)/gi,((e,t,n)=>`<span class=declare-keyword>${t}</span><span class=declare-constant-name>${n}</span>`))}function A(e){return e.replace(r,(e=>`<span class=declare-comments>${e}</span>`))}function B(e,t){return`<p class=line-code>${E(e,t.lineNumber)}`}function S(e){let t="";for(let n=0,s=e.length;n<s;n++){let r=e[n];if(!r.trim()){t+=r;continue}let l=r.indexOf("=");if(-1!=l){t+=`<span class=declare-attr-key>${r.slice(0,l)}</span>=<span class=declare-attr-value>${r.slice(l+1)}</span>${d(n,s,"&nbsp;")}`}else t+=r}return t}function Z(){return""}function C(e,t,n){let s=[],r="",l=0,a="";for(let t=0;t<e.length;t++)if(")"==e[t]){let e="";for(;s.length&&"("!=(e=s.pop());)r=e+r;"("!=e?s.push(L(r+")",!1)):(l--,s.push(L(r,!0))),r=""}else"("==e[t]&&l++,s.push(e[t]);let c=0;for(;l--;)c=s.lastIndexOf("("),a="("+L(s.slice(c+1).join(""),!1)+a,s=s.slice(0,c);return s.length&&(a=L(s.join(""),!1)+a),`<p>${E(t,n.lineNumber)}<span>${a}</span></p>`}function L(e,t){if(!e.trim())return t?`(${e})`:e;if(g(e.trim()))return`<span class=declare-comments>${e}</span>`;let n=e;return n=J(n),n=z(n),n=function(e){if(m(e))return J(e);return e.replace(/(class|in|of|this|super|interface|module|import|from|extends|new|abstract|void|static|return|break|continue|switch|case|finally|try|catch|else|if|throw)(?=[\s\(\.])/g,((e,t)=>`<span class=declare-operator-char>${t}</span>`))}(n),n=w(n),n=n.replace(/(\w+)(\s*)\(/g,((e,t,n)=>`<span class=declare-func-execute>${t}</span>${n}(`)),n=y(n),n=O(n),n=b(n),t?`(${n})`:n}function z(e){if(/^(char|int|String|Byte\[?\]?|[A-Z]+)/.test(e.trim())){if(/(\w+\s+)(.*\s*)=(.*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)=(.*)/,((e,t,n,s)=>`${H(t)}${G(n)}=${z(s)}`));if(/(\w+\s+)(.*\s*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)/,((e,t,n,s)=>`${H(t)}${G(n)}`))}let t="",n=e.split(",");for(let e=0,s=n.length;e<s;e++)t+=`${G(n[e])}${d(e,s,",")}`;return t}const D=/(\s*\w+\s*)?:(\s*\w+\s*)/g,F=/(:\s*\w+\s*)?&lt;(\s*\/?\s*\w+\s*)&gt;/g;function G(e){return F.test(e)?e.replace(F,((e,t,n)=>`${t?`<span class=declare-param-type>${t}</span>`:""}&lt;<span class=declare-param-type>${n}</span>&gt;`)):D.test(e)?e.replace(D,((e,t,n)=>t?`<span class=declare-param>${t}</span>:<span class=declare-param-type>${n}</span>`:`:<span class=declare-param-type>${n}</span>`)):e}function H(e){return e.replace(/(const|let|var|int|string|Byte\[?\]?|[A-Z]+)(\s+)/gi,((e,t,n)=>`<span class=declare-keyword>${t}</span><span class=declare-constant-name>${n}</span>`))}function J(e){return e.replace(r,(e=>`<span class=declare-comments>${e}</span>`))}function K(e,t,n){let s="",r=e.split("\n");for(let e=0;e<r.length;e++){s+=M(v(r[e]),t++,n)}return s}function M(e,t,n){let s=[],r="",l=0,a="";for(let t=0;t<e.length;t++)if(")"==e[t]){let e="";for(;s.length&&"("!=(e=s.pop());)r=e+r;"("!=e?s.push(P(r+")",!1)):(l--,s.push(P(r,!0))),r=""}else"("==e[t]&&l++,s.push(e[t]);let c=0;for(;l--;)c=s.lastIndexOf("("),a="("+P(s.slice(c+1).join(""),!1)+a,s=s.slice(0,c);return s.length&&(a=P(s.join(""),!1)+a),`<p>${E(t,n.lineNumber)}<span>${a}</span></p>`}function P(e,t){if(!e.trim())return t?`(${e})`:e;if(g(e.trim()))return`<span class=declare-comments>${e}</span>`;let n=e;return n=_(n),n=Q(n),n=function(e){if(m(e))return _(e);return e.replace(/(class|in|of|this|super|interface|typeof|module|declare|type|keyof|infer|export\s+default|export|import|from|extends|new|abstract|void|static|return|break|continue|switch|case|finally|try|catch|else|if|throw)(?=[\s\(\.])/g,((e,t)=>`<span class=declare-operator-char>${t}</span>`))}(n),n=w(n),n=function(e){if(!e.includes("=>"))return e;return e.replace(/=>/g,(e=>`<span class=declare-arrow-func>${e}</span>`))}(n),n=n.replace(/(\w+)(\s*)\(/g,((e,t,n)=>`<span class=declare-func-execute>${t}</span>${n}(`)),n=X(n),n=y(n),n=O(n),n=b(n),t?`(${n})`:n}function Q(e){if(/^(const|int|string|var|let)/.test(e.trim())){if(/(\w+\s+)(.*\s*)=(.*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)=(.*)/,((e,t,n,s)=>`${Y(t)}${V(n)}=${Q(s)}`));if(/(\w+\s+)(.*\s*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)/,((e,t,n,s)=>`${Y(t)}${V(n)}`))}let t="",n=e.split(",");for(let e=0,s=n.length;e<s;e++)t+=`${V(n[e])}${d(e,s,",")}`;return t}const T=/(\s*\w+\s*)?:(\s*\w+\s*)/g,U=/(:\s*\w+\s*)?&lt;(\s*\/?\s*\w+\s*)&gt;/g;function V(e){return U.test(e)?e.replace(U,((e,t,n)=>`${t?`<span class=declare-param-type>${t}</span>`:""}&lt;<span class=declare-param-type>${n}</span>&gt;`)):T.test(e)?e.replace(T,((e,t,n)=>t?`<span class=declare-param>${t}</span>:<span class=declare-param-type>${n}</span>`:`:<span class=declare-param-type>${n}</span>`)):x(e)?X(e):e}function X(e){return e.replace(l,((e,t,n)=>`<span class=declare-function>${t}</span>${n}`))}function Y(e){return e.replace(/(const|let|var|int|string)(\s+)/gi,((e,t,n)=>`<span class=declare-keyword>${t}</span><span class=declare-constant-name>${n}</span>`))}function _(e){return e.replace(r,(e=>`<span class=declare-comments>${e}</span>`))}const ee={java:function(e,t,n){let s="",r=e.split("\n");for(let e=0;e<r.length;e++){s+=C(r[e],t++,n)}return s},c:Z,"c++":Z,"c#":Z,js:R,javascript:R,ts:K,typescript:K,html:function(e,t,n){if(/(<!--.*-->)/g.test(e))return`${B(t,n)}<span class=declare-comments>${v(RegExp.$1)}</span></p>`;if(/(\s*)<(\!?\w+)(.*)>(.*)<\/\w+>/g.test(e)){let e=S(RegExp.$3.trim().split(" "));return`${B(t,n)}${RegExp.$1}&lt<span class=declare-html-tag>${RegExp.$2}</span>${e&&"&nbsp;"+e}&gt${RegExp.$4}&lt/<span class=declare-html-tag>${RegExp.$2}</span>&gt</p>`}if(/(\s*)<(\!?\w+)(.*)>/g.test(e)){let e=S(RegExp.$3.trim().split(" "));return`${B(t,n)}${RegExp.$1}&lt<span class=declare-html-tag>${RegExp.$2}</span>${e&&"&nbsp;"+e}&gt</p>`}return/(\s*)<\/(\w+)>/g.test(e)?`${B(t,n)}${RegExp.$1}&lt/<span class=declare-html-tag>${RegExp.$2}</span>&gt</p>`:R(e,t++,n)}};function te(e,t,n,s){let r="",l=e[t].slice(3).trim().toLowerCase(),a=1;for(++t;t<n&&!e[t].startsWith("```");)r+=s.highlight?ee[l](e[t],a++,s):e[t]+"\n",t++;return e[t]="",{startIdx:t,result:s.highlight?`<pre><span class=language>${l}</span><code>${r}</code></pre>`:`<pre><code>${r}</code></pre>`}}function ne(e){let t="",n=-1;for(;-1!=(n=e.indexOf("`"));){t+=e.slice(0,n);let s=(e=e.slice(n+1)).indexOf("`");t+=`<code class=single-code>${e.slice(0,s)}</code>`,e=e.slice(s+1)}return e&&(t+=e),t}function se(e,t,n){let s="";for(;t<n&&-1!=e[t].indexOf("-");t++)s+=e[t]+"\n";return s=function(e){const t=e.match(/(\s?)+-\s(.*)/g);if(!t)return e;a(t);const n=function(e){const t=[],n=[],s=e.length;for(let r=0;r<s;r++){const s=e[r].indexOf("-"),l={children:[],value:e[r].slice(s+1),level:s,parent:null};if(!n.length){t.push(l),n.push(l);continue}const a=n[n.length-1].level,c=e[r].indexOf("-");let i;if(a===c)i=n[n.length-1].parent;else if(a>c){for(;n[n.length-1].level>c;)n.pop();i=n[n.length-1].parent}else i=n[n.length-1];l.parent=i,i?i.children.push(l):t.push(l),n.push(l)}return t}(t);return c(n,!1)}(s),{startIdx:t,result:s}}function re(e){let t="";for(;s.test(e);){let n=e.indexOf("![");t+=e.slice(0,n);let s=(e=e.slice(n+1)).indexOf("]("),r=e.slice(0,s),l=(e=e.slice(s+2)).indexOf(")"),a=e.slice(0,l);e=e.slice(l+1),t+=`<p><img alt=${r} src=${a} /></p>`}return t}function le(e){let t="";for(;n.test(e);){let n=e.indexOf("[");t+=e.slice(0,n);let s=(e=e.slice(n+1)).indexOf("]("),r=e.slice(0,s),l=(e=e.slice(s+2)).indexOf(")"),a=e.slice(0,l);e=e.slice(l+1),t+=`<a href=${a}>${r}</a>`}return t}function ae(e,n,s){let r="";for(;n<s&&t.test(e[n]);n++)r+=e[n]+"\n";return r=function(e){const n=e.match(/\s*\d\.(.*)/g);if(!n)return e;a(n);const s=function(e){const n=[],s=[],r=e.length;for(let l=0;l<r;l++){let r=0;t.test(e[l])&&(r=e[l].indexOf(String(RegExp.$1+".")));const a={children:[],value:e[l].slice(r+2),level:r,parent:null};if(!s.length){n.push(a),s.push(a);continue}const c=s[s.length-1].level,i=r;let p;if(c===i)p=s[s.length-1].parent;else if(c>i){for(;s[s.length-1].level>i;)s.pop();p=s[s.length-1].parent}else p=s[s.length-1];a.parent=p,p?p.children.push(a):n.push(a),s.push(a)}return n}(n);return c(s,!0)}(r),{startIdx:n,result:r}}function ce(e){let t=function(e){let t="",n=-1;for(;-1!=(n=e.indexOf("**"));){t+=e.slice(0,n);let s=(e=e.slice(n+2)).indexOf("**");t+=`<strong>${e.slice(0,s)}</strong>`,e=e.slice(s+2)}return e&&(t+=e),t}(e);return t=function(e){let t="",n=-1;for(;-1!=(n=e.indexOf("*"));){t+=e.slice(0,n);let s=(e=e.slice(n+1)).indexOf("*");t+=`<i>${e.slice(0,s)}</i>`,e=e.slice(s+1)}return e&&(t+=e),t}(t),`<p>${t}</p>`}function ie(e){return e.length>6?6:e.length}function pe(e,t,n){let s="<table>";for(s+=function(e){let t=-1,n="<thead><tr>";for(let s=0,r=e.length;s<r;s++)"|"==e[s]&&oe(e,s-1)&&oe(e,s+1)&&(-1!=t&&(n+=`<th>${e.slice(t+1,s)}</th>`),t=s);return n+"</tr></thead>"}(e[t]),s+="<tbody >",++t;t<n&&"|"===e[t].trim()[0];t++)s+=ue(e[t]);return s+="</tbody></table>",{startIdx:t-1,result:s}}function ue(e){let t=-1,n="<tr>";for(let s=0,r=e.length;s<r;s++)if("|"==e[s]&&oe(e,s-1)&&oe(e,s+1)){if(-1!=t){let r=e.slice(t+1,s);if("-"===r.trim()[0])continue;n+=`<td>${r}</td>`}t=s}return n+"</tr>"}function oe(e,t){return" "===e[t]||null==e[t]}const fe={lineNumber:!1,highlight:!1};function $e(t,n){const s=t.split("\n");let r="",l=(null==s?void 0:s.length)||0;for(let t=0;t<l;){if(-1!=s[t].indexOf("#")){r+=s[t].trim().replace(e,((e,t,n)=>`<h${ie(t)}>${n}</h${ie(t)}>`))}else if(h(s[t])){const{result:e,startIdx:n}=pe(s,t,l);t=n,r+=e}else if(u(s[t]))r+=re(s[t]);else if(o(s[t]))r+=le(s[t]);else if(p(s[t])){const{result:e,startIdx:n}=se(s,t,l);t=n,r+=e}else if(i(s[t])){const{result:e,startIdx:n}=ae(s,t,l);t=n,r+=e}else if(f(s[t])){const{result:e,startIdx:a}=te(s,t,l,n||fe);t=a,r+=e}else $(s[t])?r+=`<blockquote>${s[t].slice(2)}</blockquote>`:(s[t]=s[t].trim())&&(r+=ne(ce(s[t])));t++}return r}export{$e as markdownToHTML};
